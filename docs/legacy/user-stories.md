# Masterpiece Maker - ユーザーストーリー集

**最終更新**: 2026-01-16

## 目次

1. [プロジェクト概要](#プロジェクト概要)
2. [ペルソナ定義](#ペルソナ定義)
3. [Epic](#epic)
4. [Phase 1: MVP（最小実行可能製品）](#phase-1-mvp最小実行可能製品)
5. [Phase 2: エンタメ性強化](#phase-2-エンタメ性強化)
6. [Phase 3: コミュニティ機能](#phase-3-コミュニティ機能)
7. [Phase 4: マネタイゼーション](#phase-4-マネタイゼーション)
8. [Phase 5: プロフェッショナル機能](#phase-5-プロフェッショナル機能)
9. [Phase 11: 履歴機能強化](#phase-11-履歴機能強化)
10. [Phase 12: UI/UX改善](#phase-12-uiux改善)
11. [Phase 13: 新画風追加](#phase-13-新画風追加)
12. [Phase 14: 複数画像合成機能](#phase-14-複数画像合成機能)
13. [非機能要件](#非機能要件)
14. [技術的考慮事項](#技術的考慮事項)

---

## プロジェクト概要

**プロダクト名**: Masterpiece Maker（マスターピース・メーカー）

**コンセプト**: 
ピカソ、岡本太郎、ゴッホなどの巨匠の画風で、ユーザーが指定したテーマの絵画をAIが生成する。単なる画像生成ツールではなく、「巨匠に絵を依頼する」という体験そのものをエンターテインメント化する。

**コアバリュー**:
- 🎨 **アート体験の民主化**: 高価な原画を買わずとも、巨匠の画風で自分だけの作品を所有
- 🎭 **エンタメ性**: 生成プロセスの演出、巨匠による解説、バトルモードなど
- 🤝 **教育的価値**: 美術史や画風の特徴を楽しく学べる
- 💡 **創造性の刺激**: AIとの協働による新しいアート体験

---

## ペルソナ定義

### ペルソナ1: アート愛好家の佐藤さん（35歳、会社員）

**背景**:
- 美術館巡りが趣味だが、原画は高価で手が出ない
- 自宅にアート作品を飾りたいが、ポスターでは物足りない
- SNSで自分のセンスを表現したい

**ニーズ**:
- 手頃な価格で「自分だけの」アート作品が欲しい
- 好きな巨匠の画風で、自分のテーマを描いてほしい
- 作品の背景や意味を理解したい

**ペインポイント**:
- 既製品のアートは個性がない
- オーダーメイドは高額すぎる
- 美術の専門知識がなく、作品選びに自信がない

### ペルソナ2: クリエイターの田中さん（28歳、デザイナー）

**背景**:
- グラフィックデザイナーとして活動
- クライアントワークの参考資料として様々な画風を研究
- 自身の作品にも多様なスタイルを取り入れたい

**ニーズ**:
- 様々な画風を素早く試せるツール
- クライアント提案用のモックアップ作成
- 画風の特徴を体系的に学びたい

**ペインポイント**:
- 画風の研究に時間がかかる
- 複数のスタイルを試すのが大変
- 著作権を気にせず使える素材が欲しい

### ペルソナ3: 教育者の山田先生（45歳、美術教師）

**背景**:
- 高校で美術を教えている
- 生徒に美術史や画風の違いを教えたい
- デジタルツールを授業に取り入れたい

**ニーズ**:
- 生徒が楽しく美術史を学べる教材
- 画風の違いを視覚的に理解できるツール
- 生徒の創造性を刺激する体験

**ペインポイント**:
- 教科書だけでは生徒の興味を引けない
- 実際の作品を見せる機会が限られる
- デジタルネイティブ世代に合った教材が少ない

---

## Epic

### Epic 1: 巨匠の画風で自分だけの絵画を作る

**As a** アート愛好家  
**I want to** ピカソや岡本太郎などの巨匠の画風で、自分のテーマに沿った絵画をオーダーできる  
**So that** 高価な原画を買わずとも、自分だけのアート作品を手に入れられる

**ビジネス価値**:
- ユーザー獲得の核となる機能
- 差別化要素（単なる画像生成ツールとの違い）
- 口コミ・バイラル効果が期待できる

**成功指標**:
- 月間アクティブユーザー数: 10,000人（6ヶ月後）
- 作品生成数: 50,000点（6ヶ月後）
- SNS共有率: 30%以上
- ユーザー満足度: 4.5/5.0以上

---

## Phase 1: MVP（最小実行可能製品）

### US-1.1: 巨匠の画風を選択する

**As a** ユーザー  
**I want to** 複数の巨匠の画風から好きなものを選択できる  
**So that** 自分の好みに合った画風で絵画を生成できる

**Acceptance Criteria**:
1. 最低5種類の巨匠画風が選択可能（ピカソ、ゴッホ、岡本太郎、モネ、ダリ）
2. 各画風には代表的な作品例のサムネイルが表示される
3. 画風の特徴が簡潔に説明されている（50文字程度）
4. 選択した画風がハイライト表示される
5. モバイル・デスクトップ両対応のレスポンシブUI

**Edge Cases**:
- 画風の画像が読み込めない場合のフォールバック表示
- 将来的な画風追加に対応できる拡張可能な設計

**技術的考慮事項**:
- 画風データはJSON形式で管理
- 画風ごとのプロンプトテンプレートを用意
- 画像の遅延読み込み（Lazy Loading）

**優先度**: 🔴 Critical

---

### US-1.2: 描いてほしいテーマを入力する

**As a** ユーザー  
**I want to** 自由にテーマやモチーフを入力できる  
**So that** 自分だけのオリジナル作品を生成できる

**Acceptance Criteria**:
1. テキスト入力フィールドが提供される（最大500文字）
2. 入力例が表示される（「夕暮れの富士山」「猫と月」など）
3. 日本語・英語両対応
4. リアルタイムで文字数カウントが表示される
5. 不適切な表現を検出する簡易フィルター

**Edge Cases**:
- 空白のみの入力を防ぐバリデーション
- 特殊文字や絵文字の扱い
- 著作権侵害の可能性がある固有名詞の検出

**技術的考慮事項**:
- プロンプトインジェクション対策
- 多言語対応のための翻訳API統合準備
- NGワードリストの管理

**優先度**: 🔴 Critical

---

### US-1.3: 生成プロセスを楽しむ

**As a** ユーザー  
**I want to** 絵画が生成される過程を視覚的に楽しめる  
**So that** 待ち時間を退屈せずに過ごせる

**Acceptance Criteria**:
1. 「巨匠が筆を走らせている」風のアニメーションが表示される
2. 生成進捗が視覚的に分かる（プログレスバーまたはステージ表示）
3. 巨匠に関する豆知識が表示される（ランダムで3-5個）
4. 生成時間の目安が表示される（「約30秒」など）
5. キャンセルボタンが提供される

**Edge Cases**:
- 生成が予想以上に長引いた場合のメッセージ
- ネットワークエラー時の適切なエラー表示
- 生成失敗時のリトライ機能

**技術的考慮事項**:
- WebSocketまたはポーリングによる進捗取得
- アニメーションのパフォーマンス最適化
- タイムアウト処理（最大60秒）

**優先度**: 🟡 High

---

### US-1.4: 生成された絵画を確認する

**As a** ユーザー  
**I want to** 生成された絵画を高解像度で確認できる  
**So that** 作品の細部まで鑑賞できる

**Acceptance Criteria**:
1. 生成された画像が高解像度で表示される（最低1024x1024px）
2. ズーム機能が提供される（ピンチ・ホイール対応）
3. 画風名とテーマが表示される
4. 生成日時が記録される
5. 「気に入らない場合」の再生成ボタンがある

**Edge Cases**:
- 画像の読み込みに失敗した場合のエラー表示
- 低速回線での段階的な画像表示（プログレッシブJPEG）
- 画像が期待と異なる場合のフィードバック収集

**技術的考慮事項**:
- 画像の最適化（WebP形式への変換）
- CDNを使用した高速配信
- 画像のメタデータ管理

**優先度**: 🔴 Critical

---

### US-1.5: 作品をダウンロードする

**As a** ユーザー  
**I want to** 生成された絵画を高解像度でダウンロードできる  
**So that** 印刷したり壁紙として使用できる

**Acceptance Criteria**:
1. ダウンロードボタンが明確に表示される
2. 複数の解像度が選択可能（1024x1024, 2048x2048, 4096x4096）
3. ファイル形式が選択可能（PNG, JPEG, WebP）
4. ファイル名に画風とテーマが含まれる
5. ダウンロード時にAI生成の透かしが挿入される（オプション）

**Edge Cases**:
- ブラウザのダウンロード制限への対応
- 大容量ファイルのダウンロード時間
- モバイルデバイスでのストレージ容量確認

**技術的考慮事項**:
- サーバーサイドでの画像リサイズ処理
- 透かし挿入のための画像処理ライブラリ
- ダウンロード数の追跡（アナリティクス）

**優先度**: 🔴 Critical

---

### US-1.6: 作品をSNSで共有する（不要）

**ステータス**: ❌ 実装しない

**理由**:
- 社内ツールとして開発しているため、SNS共有機能は不要
- ダウンロード機能で十分

---

### US-1.7: 過去の作品を閲覧する

**As a** ユーザー  
**I want to** 自分が過去に生成した作品を一覧で見られる  
**So that** お気に入りの作品を再度ダウンロードしたり比較できる

**Acceptance Criteria**:
1. マイギャラリーページが提供される
2. 作品がサムネイル形式で一覧表示される
3. 生成日時、画風、テーマでフィルタリングできる
4. 各作品をクリックすると詳細ページに遷移する
5. 作品の削除機能がある

**Edge Cases**:
- 大量の作品がある場合のページネーション
- 削除した作品の復元機能（ゴミ箱）
- ストレージ容量の制限

**技術的考慮事項**:
- データベース設計（ユーザーと作品の関連）
- 画像のサムネイル生成
- 無限スクロールまたはページネーション

**優先度**: 🟢 Medium

---

## Phase 2: エンタメ性強化

### US-2.1: 巨匠による作品解説を聞く

**As a** ユーザー  
**I want to** 生成された作品について、巨匠本人（AI）による解説を聞ける  
**So that** 作品の意図や画風の特徴を深く理解できる

**Acceptance Criteria**:
1. 「解説を聞く」ボタンが表示される
2. 巨匠のペルソナに合わせた解説文が生成される（200-300文字）
3. 音声読み上げ機能がある（日本語TTS）
4. 解説文はテキストでも表示される
5. 解説の内容は画風の特徴と作品テーマを結びつける

**Edge Cases**:
- 音声再生に失敗した場合のテキスト表示
- 解説生成に時間がかかる場合のローディング表示
- 不適切な解説内容の検出とフィルタリング

**技術的考慮事項**:
- LLM（Claude/GPT-4）による解説文生成
- プロンプトテンプレートの設計（巨匠ごとの口調）
- TTS API（Web Speech API / ElevenLabs）の統合
- 解説文のキャッシング

**優先度**: 🟡 High

---

### US-2.2: 巨匠バトルモードで遊ぶ

**As a** ユーザー  
**I want to** 同じテーマで複数の巨匠に描かせて比較できる  
**So that** 画風の違いを楽しみながら学べる

**Acceptance Criteria**:
1. 「巨匠バトル」モードが選択できる
2. 2-4人の巨匠を選択できる
3. 同じテーマで一斉に生成される
4. 生成された作品が並べて表示される
5. ユーザーが「勝者」を選べる（投票機能）
6. 投票結果が集計され、ランキングが表示される

**Edge Cases**:
- 生成に失敗した巨匠がいる場合の処理
- 同点の場合の表示
- 投票の不正防止（1ユーザー1票）

**技術的考慮事項**:
- 並列画像生成のキューイング処理
- 投票データの保存と集計
- リアルタイムランキング更新

**優先度**: 🟢 Medium

---

### US-2.3: リミックス機能で画風を変換する

**As a** ユーザー  
**I want to** 生成された作品の構図を維持したまま、別の画風に変換できる  
**So that** 同じテーマで様々な表現を試せる

**Acceptance Criteria**:
1. 作品詳細ページに「リミックス」ボタンがある
2. 別の画風を選択できる
3. 元の構図が可能な限り維持される
4. リミックス前後の作品を比較表示できる
5. リミックス履歴が記録される

**Edge Cases**:
- 構図の維持が困難な画風の組み合わせ
- リミックスの連鎖（リミックスのリミックス）
- 元作品との関連付け管理

**技術的考慮事項**:
- Image-to-Image生成の活用
- 構図保持のためのプロンプトエンジニアリング
- リミックス関係のデータモデル設計

**優先度**: 🟢 Medium

---

### US-2.4: 生成プロセスのタイムラプス動画を見る

**As a** ユーザー  
**I want to** 絵画が徐々に完成していく様子を動画で見られる  
**So that** 創作プロセスそのものを楽しめる

**Acceptance Criteria**:
1. 生成完了後に「タイムラプスを見る」ボタンが表示される
2. 10-30秒程度の動画が再生される
3. BGMが付いている（巨匠の時代に合った音楽）
4. 動画もダウンロード可能
5. SNS共有時に動画を選択できる

**Edge Cases**:
- 動画生成に失敗した場合の静止画表示
- 動画ファイルサイズの最適化
- モバイルでの動画再生パフォーマンス

**技術的考慮事項**:
- 中間生成画像の保存（ステップごと）
- FFmpegによる動画生成
- 動画ストリーミング配信

**優先度**: 🔵 Low

---

## Phase 3: コミュニティ機能

### US-3.1: 他のユーザーの作品を閲覧する

**As a** ユーザー  
**I want to** 他のユーザーが生成した作品を見られる  
**So that** インスピレーションを得たり、人気のテーマを知れる

**Acceptance Criteria**:
1. パブリックギャラリーページがある
2. 最新作品、人気作品、トレンドでソートできる
3. 画風やテーマでフィルタリングできる
4. 各作品に「いいね」ボタンがある
5. 作品をクリックすると詳細ページに遷移する

**Edge Cases**:
- 不適切な作品の報告機能
- プライバシー設定（公開/非公開）
- 大量の作品がある場合のパフォーマンス

**技術的考慮事項**:
- 作品の公開設定フラグ
- いいね数のカウント（Redis使用）
- 画像のCDN配信

**優先度**: 🟢 Medium

---

### US-3.2: 作品にコメントする

**As a** ユーザー  
**I want to** 他のユーザーの作品にコメントできる  
**So that** 感想を伝えたり、交流できる

**Acceptance Criteria**:
1. 作品詳細ページにコメント欄がある
2. コメントは時系列で表示される
3. コメントに返信できる（ネスト1階層まで）
4. 不適切なコメントを報告できる
5. 自分のコメントは編集・削除できる

**Edge Cases**:
- スパムコメントの検出と防止
- コメント数が多い場合のページネーション
- 通知機能（コメントされたら通知）

**技術的考慮事項**:
- コメントのデータモデル設計
- スパムフィルター（Akismet等）
- リアルタイム更新（WebSocket）

**優先度**: 🔵 Low

---

### US-3.3: お気に入りの作品をコレクションする

**As a** ユーザー  
**I want to** 他のユーザーの作品をお気に入りに追加できる  
**So that** 後で見返したり、参考にできる

**Acceptance Criteria**:
1. 各作品に「お気に入り」ボタンがある
2. お気に入りした作品は専用ページで一覧表示される
3. お気に入り数が作品に表示される
4. お気に入りは解除できる
5. お気に入りした作品の作者に通知される（オプション）

**Edge Cases**:
- お気に入り数の上限設定
- 削除された作品の扱い
- プライバシー設定（お気に入りを公開/非公開）

**技術的考慮事項**:
- 多対多のリレーション設計
- お気に入り数のキャッシング
- 通知システムの実装

**優先度**: 🔵 Low

---

### US-3.4: ユーザーをフォローする

**As a** ユーザー  
**I want to** 気に入ったクリエイターをフォローできる  
**So that** その人の新作をいち早く見られる

**Acceptance Criteria**:
1. ユーザープロフィールページに「フォロー」ボタンがある
2. フォロー中のユーザーの新作が専用フィードに表示される
3. フォロワー数・フォロー数が表示される
4. フォローは解除できる
5. フォローされたら通知される

**Edge Cases**:
- 相互フォローの表示
- ブロック機能
- フォロー数の上限

**技術的考慮事項**:
- フォロー関係のデータモデル
- フィードの生成アルゴリズム
- 通知システムの拡張

**優先度**: 🔵 Low

---

## Phase 4: マネタイゼーション

### US-4.1: 無料プランで基本機能を使う

**As a** 無料ユーザー  
**I want to** 基本的な機能を無料で使える  
**So that** サービスを試してから有料プランを検討できる

**Acceptance Criteria**:
1. 月10作品まで無料で生成できる
2. 5種類の基本画風が使用できる
3. 解像度は1024x1024まで
4. 広告が表示される（控えめに）
5. 透かしが入る

**Edge Cases**:
- 月の途中で上限に達した場合のメッセージ
- 上限リセットのタイミング（月初）
- 有料プランへの誘導UI

**技術的考慮事項**:
- 使用量のトラッキング
- プラン管理システム
- 広告配信システムの統合

**優先度**: 🟡 High

---

### US-4.2: プレミアムプランにアップグレードする

**As a** ユーザー  
**I want to** 有料プランにアップグレードできる  
**So that** 制限なく高品質な作品を生成できる

**Acceptance Criteria**:
1. プラン比較ページが分かりやすい
2. 月額980円で無制限生成
3. 全画風（20種類以上）が使用可能
4. 最高解像度4096x4096
5. 透かしなし、広告なし
6. 優先生成（キューの優先度が高い）
7. 商用利用可能

**Edge Cases**:
- 決済失敗時の処理
- プランのダウングレード
- 返金ポリシー

**技術的考慮事項**:
- Stripe決済の統合
- サブスクリプション管理
- 商用利用規約の整備

**優先度**: 🟡 High

---

### US-4.3: 作品を販売する（マーケットプレイス）

**As a** クリエイター  
**I want to** 自分の生成した作品を販売できる  
**So that** 収益を得られる

**Acceptance Criteria**:
1. 作品に価格を設定できる（100円〜10,000円）
2. 購入者は高解像度版をダウンロードできる
3. 売上の70%がクリエイターに還元される
4. 販売実績がプロフィールに表示される
5. 購入履歴が管理できる

**Edge Cases**:
- 著作権・商標権の侵害チェック
- 返金リクエストの処理
- 税務処理（源泉徴収）

**技術的考慮事項**:
- エスクロー決済システム
- ライセンス管理
- 売上レポート機能

**優先度**: 🔵 Low

---

### US-4.4: 企業向けAPIを利用する

**As a** 企業ユーザー  
**I want to** API経由で大量の画像を生成できる  
**So that** 自社サービスに統合できる

**Acceptance Criteria**:
1. APIキーが発行される
2. RESTful APIが提供される
3. レート制限が明確（プランごと）
4. APIドキュメントが充実している
5. Webhookで生成完了を通知できる

**Edge Cases**:
- APIキーの漏洩対策
- 大量リクエストの処理
- SLA（サービスレベル契約）

**技術的考慮事項**:
- API Gateway
- レート制限（Redis）
- 使用量の課金計算

**優先度**: 🔵 Low

---

## Phase 5: プロフェッショナル機能

### US-5.1: カスタム画風を学習させる

**As a** プロフェッショナルユーザー  
**I want to** 自分の作品をアップロードして、その画風を学習させられる  
**So that** 自分だけのオリジナル画風で生成できる

**Acceptance Criteria**:
1. 10-20枚の画像をアップロードできる
2. 学習には24-48時間かかる
3. 学習完了後、その画風が選択肢に追加される
4. カスタム画風は非公開または公開を選べる
5. 学習コストは別途課金（5,000円/回）

**Edge Cases**:
- 学習に失敗した場合の返金
- 不適切な画像のフィルタリング
- 著作権侵害の防止

**技術的考慮事項**:
- LoRA（Low-Rank Adaptation）の活用
- GPU計算リソースの管理
- 学習パイプラインの自動化

**優先度**: 🔵 Low

---

### US-5.2: バッチ生成機能を使う

**As a** プロフェッショナルユーザー  
**I want to** 複数のテーマを一括で生成できる  
**So that** 効率的に大量の作品を作れる

**Acceptance Criteria**:
1. CSVファイルで複数のテーマをアップロードできる
2. 最大100件まで一括生成可能
3. 各テーマに異なる画風を指定できる
4. 生成完了後、ZIPファイルでまとめてダウンロードできる
5. 進捗状況がリアルタイムで確認できる

**Edge Cases**:
- 一部の生成に失敗した場合の処理
- 生成中のキャンセル機能
- 大量生成時のサーバー負荷管理

**技術的考慮事項**:
- バックグラウンドジョブキュー（Bull/Redis）
- 進捗管理のWebSocket通信
- ZIPファイル生成の最適化

**優先度**: 🔵 Low

---

### US-5.3: 高度なパラメータ調整を行う

**As a** プロフェッショナルユーザー  
**I want to** 生成パラメータを細かく調整できる  
**So that** より意図に沿った作品を生成できる

**Acceptance Criteria**:
1. スタイルの強度を調整できる（0-100%）
2. カラーパレットを指定できる
3. 構図のタイプを選択できる（縦長、横長、正方形、自由）
4. シード値を固定して再現性を確保できる
5. ネガティブプロンプトを指定できる

**Edge Cases**:
- パラメータの組み合わせによる生成失敗
- 極端な設定値の制限
- プリセットの保存と読み込み

**技術的考慮事項**:
- パラメータのバリデーション
- プロンプトエンジニアリングの高度化
- ユーザー設定の永続化

**優先度**: 🔵 Low

---

## 非機能要件

### NFR-1: パフォーマンス

**As a** ユーザー  
**I want to** 快適な速度でサービスを利用できる  
**So that** ストレスなく作品を生成できる

**Acceptance Criteria**:
1. ページ読み込み時間: 3秒以内（初回）、1秒以内（2回目以降）
2. 画像生成時間: 30秒以内（90%のケース）
3. API応答時間: 200ms以内
4. 同時接続ユーザー数: 1,000人以上
5. 画像表示の遅延: 500ms以内

**技術的考慮事項**:
- CDNの活用（Cloudflare/AWS CloudFront）
- 画像の最適化と圧縮
- データベースクエリの最適化
- キャッシング戦略（Redis）
- 負荷分散（ロードバランサー）

---

### NFR-2: セキュリティ

**As a** ユーザー  
**I want to** 安全にサービスを利用できる  
**So that** 個人情報や作品が保護される

**Acceptance Criteria**:
1. HTTPS通信の強制
2. パスワードのハッシュ化（bcrypt）
3. CSRF対策
4. XSS対策
5. SQLインジェクション対策
6. レート制限（DDoS対策）
7. 定期的なセキュリティ監査

**技術的考慮事項**:
- JWT認証
- OWASP Top 10への対応
- セキュリティヘッダーの設定
- 脆弱性スキャン（Snyk/Dependabot）

---

### NFR-3: スケーラビリティ

**As a** サービス運営者  
**I want to** ユーザー数の増加に対応できる  
**So that** サービスの成長を妨げない

**Acceptance Criteria**:
1. 水平スケーリングが可能
2. データベースのシャーディング対応
3. 画像生成のキューイング処理
4. ストレージの自動拡張
5. モニタリングとアラート

**技術的考慮事項**:
- マイクロサービスアーキテクチャ
- Kubernetes/Docker
- オートスケーリング
- 分散データベース（PostgreSQL + Citus）
- オブジェクトストレージ（S3/GCS）

---

### NFR-4: 可用性

**As a** ユーザー  
**I want to** いつでもサービスにアクセスできる  
**So that** 必要な時に作品を生成できる

**Acceptance Criteria**:
1. 稼働率: 99.9%以上（月間ダウンタイム43分以内）
2. 自動フェイルオーバー
3. バックアップ: 日次（保持期間30日）
4. 災害復旧計画（DR）
5. ヘルスチェックとモニタリング

**技術的考慮事項**:
- マルチリージョン構成
- データベースのレプリケーション
- 自動バックアップ
- 監視ツール（Datadog/New Relic）

---

### NFR-5: ユーザビリティ

**As a** ユーザー  
**I want to** 直感的に操作できる  
**So that** 学習コストなく使い始められる

**Acceptance Criteria**:
1. 初回訪問時のチュートリアル
2. ツールチップによるヘルプ
3. エラーメッセージが分かりやすい
4. モバイルフレンドリー（レスポンシブデザイン）
5. アクセシビリティ対応（WCAG 2.1 AA準拠）

**技術的考慮事項**:
- ユーザーテストの実施
- A/Bテスト
- アナリティクス（Google Analytics/Mixpanel）
- アクセシビリティ監査

---

### NFR-6: 国際化

**As a** 海外ユーザー  
**I want to** 自分の言語でサービスを利用できる  
**So that** 言語の壁なく楽しめる

**Acceptance Criteria**:
1. 日本語、英語、中国語、韓国語に対応
2. 言語切り替えが簡単
3. 日付・通貨の地域対応
4. RTL（右から左）言語のサポート準備
5. 翻訳品質の維持

**技術的考慮事項**:
- i18nライブラリ（react-i18next）
- 翻訳管理プラットフォーム（Crowdin）
- 地域別のコンテンツ配信

---

## Phase 11: 履歴機能強化

### US-11.1: 履歴永続化（✅ 完了）

**As a** ユーザー
**I want to** ページをリロードしても過去の生成画像が残っている
**So that** いつでも過去の作品を見返せる

**Acceptance Criteria**:
1. ページリロード後も履歴が消えない
2. 過去の作品を前/次ボタンで閲覧できる
3. 画像はIndexedDBに保存される
4. 最大100枚まで履歴を保持

**実装状況**: ✅ Phase 11.1で完了（2026-01-16）

**優先度**: 🔴 Critical

---

### US-11.2: パフォーマンス改善（✅ 完了）

**As a** ユーザー
**I want to** 画像生成とコメント表示が速く完了する
**So that** ストレスなく使える

**Acceptance Criteria**:
1. 画像とコメントが並列生成される
2. 各処理が完了次第即座に表示される
3. UI更新が瞬時に反映される

**実装状況**: ✅ Phase 11.2で完了（2026-01-16）

**優先度**: 🟡 High

---

### US-11.3: 巨匠コメントの永続化（✅ 完了）

**As a** ユーザー
**I want to** 過去の作品の巨匠コメントも復元される
**So that** ページリロード後もコメントを読み返せる

**Acceptance Criteria**:
1. コメントがGenerationMetadataに保存される
2. 履歴復元時にコメントも復元される
3. コメントがない場合は「コメントなし」と表示

**Edge Cases**:
- コメント生成に失敗した場合の扱い
- 古い履歴（コメントフィールドがない）の互換性

**技術的考慮事項**:
- `GenerationMetadata`に`artistComment?: string`フィールド追加
- `saveGenerationMetadata`でコメントも保存
- 履歴復元時にコメントも復元

**実装状況**: ✅ Phase 11.3で完了（2026-01-16）

**優先度**: 🟡 High

---

### US-11.4: 比較機能の修正

**As a** ユーザー
**I want to** 「比較」ボタンで前のバージョンと比較できる
**So that** 修正前後の違いを確認できる

**Acceptance Criteria**:
1. 「比較」ボタンをクリックすると比較モードになる
2. ホバーで前のバージョンが表示される
3. 比較モードは解除できる

**Edge Cases**:
- 最初の作品（前のバージョンがない）の場合
- 画像の読み込みに失敗した場合

**技術的考慮事項**:
- `previousImage`の取得ロジックを修正
- IndexedDBからの画像読み込み

**優先度**: 🟢 Medium

---

## Phase 12: UI/UX改善

### US-12.1: 履歴管理UI改善

**As a** ユーザー
**I want to** 履歴を一覧で見られる専用ページがある
**So that** 過去の作品を効率的に探せる

**Acceptance Criteria**:
1. ギャラリー表示（グリッドレイアウト）
2. 巨匠別フィルタリング
3. 日付別ソート
4. 作品の削除機能
5. サムネイル表示

**Edge Cases**:
- 大量の作品がある場合のページネーション
- 削除確認ダイアログ
- 削除後のストレージクリーンアップ

**技術的考慮事項**:
- 新しいページ（`/gallery`）の作成
- サムネイル生成（リサイズ）
- フィルタリング・ソート機能

**優先度**: 🟢 Medium

---

### US-12.2: 作品詳細ページ

**As a** ユーザー
**I want to** 作品詳細ページでメタデータを確認できる
**So that** プロンプトや生成パラメータを見返せる

**Acceptance Criteria**:
1. 画像のフルサイズ表示
2. 巨匠名、テーマ、生成日時
3. 使用されたプロンプト
4. ダウンロードボタン
5. 削除ボタン

**優先度**: 🔵 Low

---

### US-12.3: レスポンシブデザイン修正

**As a** ユーザー
**I want to** ウィンドウ幅が狭くても適切にレイアウトされる
**So that** どんな画面サイズでも快適に使える

**Acceptance Criteria**:
1. 「生成された傑作」テキストが縦書きにならない
2. 最小幅を設定して崩れを防ぐ
3. テキストの折り返しが適切に動作する
4. ボタン配置が重ならない
5. モバイル・タブレット・デスクトップで適切に表示

**Edge Cases**:
- 極端に狭い画面（320px未満）
- 日本語と英語の文字幅の違い
- 長いテキスト（巨匠名、テーマ等）

**技術的考慮事項**:
- CSS `min-width` プロパティの設定
- Tailwind CSS のブレークポイント活用
- `text-overflow: ellipsis` の適用
- Flexbox/Grid レイアウトの調整

**優先度**: 🔴 Critical

---

### US-12.4: プロンプト並列表示UI

**As a** ユーザー
**I want to** 画像とプロンプト詳細を並べて見られる
**So that** 画像を見ながらプロンプトを確認できる

**Acceptance Criteria**:
1. 左: 画像表示、右: プロンプト詳細
2. プロンプト詳細はスクロール可能
3. ユーザー入力、解釈、構造化プロンプトを全て表示
4. コピーボタンで各セクションをコピー可能
5. レイアウト切り替え（縦並び/横並び）

**Edge Cases**:
- 長いプロンプトの表示
- 画像読み込み失敗時の表示
- モバイルでの表示（縦並びに自動切り替え）

**技術的考慮事項**:
- 2カラムレイアウトの実装
- `PromptDetailsDialog`の拡張または新規コンポーネント
- レスポンシブ対応（画面幅に応じて縦横切り替え）

**優先度**: 🟡 High

---

### US-12.5: 履歴削除機能

**As a** ユーザー
**I want to** 不要な履歴を削除できる
**So that** ストレージを節約し、履歴を整理できる

**Acceptance Criteria**:
1. 個別削除: 各作品に削除ボタンがある
2. 全削除: 全履歴を一括削除できる
3. 削除確認ダイアログが表示される
4. IndexedDBとLocalStorageの両方から削除される
5. 削除後、UIが即座に更新される

**Edge Cases**:
- 現在表示中の画像を削除した場合
- 削除中にページリロードした場合
- ストレージエラー時の処理

**技術的考慮事項**:
- `deleteImage` 関数の実装（IndexedDB）
- LocalStorageのメタデータ削除
- 削除確認ダイアログ（`AlertDialog`）
- 削除後の履歴インデックス調整

**優先度**: 🟡 High

---

## Phase 13: 新画風追加

### US-13.1: 写真風モードの追加

**As a** ユーザー
**I want to** 写真風（フォトリアル）で画像を生成できる
**So that** 現実的な写真のような作品を作れる

**Acceptance Criteria**:
1. 「写真風」が巨匠選択肢に追加される
2. フォトリアリスティックなプロンプトテンプレート
3. 他の巨匠と同様の機能（リミックス、チャット等）

**Edge Cases**:
- 実在の人物・場所の扱い
- 著作権・肖像権の考慮

**技術的考慮事項**:
- `artists.ts`に写真風アーティストを追加
- プロンプトテンプレートの設計
- アバター画像（カメラアイコン等）

**優先度**: 🟢 Medium

---

### US-13.2: その他の画風追加

**As a** ユーザー
**I want to** 様々な画風から選べる
**So that** 多様な表現を楽しめる

**候補画風**:
- 水彩画風
- 油絵風
- ペン画風
- アニメ風
- ドット絵風

**優先度**: 🔵 Low

---

## Phase 14: 複数画像合成機能

### US-14.1: 複数画像をアップロードして合成

**As a** ユーザー
**I want to** 複数の画像をアップロードして合成できる
**So that** 複雑な構図や組み合わせの作品を作れる

**Acceptance Criteria**:
1. 2-4枚の画像を同時にアップロードできる
2. 合成方法を指示できる（例: 「左右に並べて」「背景として使って」）
3. 各画像の配置や比率を指定できる
4. プレビューで確認してから生成できる
5. 合成後も巨匠の画風が適用される

**Edge Cases**:
- 画像サイズが異なる場合の扱い
- アスペクト比が大きく異なる場合
- 指示が曖昧な場合の対処

**技術的考慮事項**:
- Gemini 3.0の複数画像入力機能を活用
- 画像配置のプロンプトエンジニアリング
- 複数画像のBase64エンコーディング
- プレビューUIの実装

**優先度**: 🟢 Medium

---

### US-14.2: 高度な合成指示

**As a** ユーザー
**I want to** 詳細な合成指示を出せる
**So that** 意図通りの構図を実現できる

**Acceptance Criteria**:
1. 前景・背景の指定
2. ブレンドモードの選択（重ねる、溶け込ませる等）
3. 各画像の透明度調整
4. トリミング領域の指定
5. テンプレート指示（コラージュ、パノラマ等）

**Edge Cases**:
- 矛盾する指示の検出
- 技術的に実現不可能な指示
- 画風との相性問題

**技術的考慮事項**:
- 高度なプロンプトテンプレート設計
- 画像前処理（トリミング、リサイズ）
- エラーハンドリングと代替案提示

**優先度**: 🔵 Low

---

